#!/bin/bash
# strongSwan ipsec wrapper script for swanctl-based installations
# Generated by Ansible for Algo Quantum VPN

STRONGSWAN_DIR="{{ strongswan_install_dir }}"
export LD_LIBRARY_PATH="/usr/local/lib:${STRONGSWAN_DIR}/lib/ipsec:${LD_LIBRARY_PATH}"

case "$1" in
    version|--version)
        echo "strongSwan 6.0.2 with LibOQS quantum-safe support"
        ;;
    status|statusall)
        "${STRONGSWAN_DIR}/sbin/swanctl" --stats
        ;;
    start)
        systemctl start strongswan
        ;;
    stop)
        systemctl stop strongswan
        ;;
    restart)
        systemctl restart strongswan
        ;;
    *)
        # Pass through all other commands to swanctl
        "${STRONGSWAN_DIR}/sbin/swanctl" "$@"
        ;;
esac
