# Test strongSwan configuration for quantum-safe testing
# Generated by Algo VPN quantum-safe role

charon {
    # Logging configuration for testing
    filelog {
        /var/log/strongswan-test.log {
            time_format = %b %e %T
            ike_name = yes
            append = no
            default = 2
            flush_line = yes
        }
    }

    # Load required plugins for quantum-safe testing
    load_modular = yes

    plugins {
        # Core plugins
        openssl {
            load = yes
        }

        # Network plugins
        socket-default {
            load = yes
        }

        kernel-netlink {
            load = yes
        }

        # Authentication plugins
        pem {
            load = yes
        }

        x509 {
            load = yes
        }

        # Configuration plugins
        stroke {
            load = yes
        }

        updown {
            load = yes
        }

        # Enable quantum-safe plugin if available
        oqs {
            load = yes
        }

        # Enable ML-KEM plugin if available
        ml {
            load = yes
        }
    }

    # Network configuration for testing
    port = 500
    port_nat_t = 4500

    # Testing specific settings
    threads = 16
    processor {
        priority_threads {
            high = 1
            medium = 4
            low = 1
        }
    }

    # Disable DPD for testing stability
    dpd_delay = 0

    # Testing pools
    pools {
        test-pool {
            addrs = 10.48.1.0/24
        }
    }
}

# Include system configuration
include strongswan.d/*.conf
